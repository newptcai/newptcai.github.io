
<!DOCTYPE html>
<html lang="en">
<head>
<title>The moment of truncated random variables - Xing Shi Cai/蔡醒诗</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:regular,bold">
    <link rel="stylesheet" type="text/css" href="https://newptcai.github.io/theme/css/w3.css">
    <link rel="stylesheet" type="text/css" href="https://newptcai.github.io/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="https://newptcai.github.io/theme/css/jqcloud.css">
    <link rel="stylesheet" type="text/css" href="https://newptcai.github.io/theme/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://newptcai.github.io/theme/css/shariff.min.css">
    <link rel="stylesheet" type="text/css" href="https://newptcai.github.io/theme/css/pygments-highlight-github.css">

    <!-- JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://newptcai.github.io/theme/js/jqcloud.min.js"></script>

     <!-- Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="HandheldFriendly" content="True" />

    <meta name="author" content="Xing Shi Cai" />
    <meta name="description" content="Given a random variable \(Y\), sometimes we want to compute the expectation of \(Y[Y\le a]\), where \([P]=1 …" /> 
    <meta name="keywords" content="Mathematica, CAS, probability"> 

    <!-- Facebook OpenGraph -->
    <meta property="og:site_name" content="Xing Shi Cai/蔡醒诗">
    <meta property="og:title" content="The moment of truncated random variables - Xing Shi Cai/蔡醒诗" />
    <meta property="og:description" content="Given a random variable \(Y\), sometimes we want to compute the expectation of \(Y[Y\le a]\), where \([P]=1 …" />
    <meta property="og:image" content="https://newptcai.github.io">
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://newptcai.github.io/the-moment-of-truncated-random-variables.html" />
    <meta property="og:locale" content="de_DE" />
    <meta property="og:locale:alternate" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The moment of truncated random variables - Xing Shi Cai/蔡醒诗">
    <meta name="twitter:description" content="Given a random variable \(Y\), sometimes we want to compute the expectation of \(Y[Y\le a]\), where \([P]=1 …">
    <meta name="twitter:image" content="https://newptcai.github.io">
</head>
<body>
  <div class="w3-row w3-card w3-white">
    <header id=banner>
       <!-- AUTHOR INITIALS-->
      <a href="https://newptcai.github.io" id=logo title="Home">XS</a>
      <nav id="menu">
        <ul>
          <li><a href="https://newptcai.github.io/pages/research.html">Research</a></li>
          <li><a href="https://newptcai.github.io/pages/teaching.html">Teaching</a></li>
          <li style="font-weight: bold;"><a href="https://newptcai.github.io/category/math.html">math</a></li>
          <li ><a href="https://newptcai.github.io/category/photo.html">photo</a></li>
          <li ><a href="https://newptcai.github.io/category/programming.html">programming</a></li>
        </ul>
      </nav>
    </header>
  </div>
<br>
<article>
  <header class="w3-container col-main">
    <h1>The moment of truncated random variables</h1>
    <div class="post-info">
      <div class="w3-opacity w3-margin-right w3-margin-bottom" style="flex-grow: 1;">
        <span>  Posted on Sat 08 December 2018 in <a href="https://newptcai.github.io/category/math.html" style="font-style: italic">math</a>

        </span>
      </div>
      <div id="article-tags">
        <span class="w3-tag w3-light-grey w3-text-red w3-hover-red">
          <a href="https://newptcai.github.io/tag/mathematica.html" title="  All posts about Mathematica
">#Mathematica</a>
        </span>
        <span class="w3-tag w3-light-grey w3-text-red w3-hover-red">
          <a href="https://newptcai.github.io/tag/cas.html" title="  All posts about Cas
">#CAS</a>
        </span>
        <span class="w3-tag w3-light-grey w3-text-red w3-hover-red">
          <a href="https://newptcai.github.io/tag/probability.html" title="  All posts about Probability
">#probability</a>
        </span>
      </div>
    </div>
  </header>
  <br>
  <div class="col-main w3-container">
    <main id="article-content">
      <p>Given a random variable <span class="math">\(Y\)</span>, sometimes we want to compute the expectation of <span class="math">\(Y[Y\le a]\)</span>, where
<span class="math">\([P]=1\)</span> if the <span class="math">\(P\)</span> and true and <span class="math">\([P]=0\)</span> if <span class="math">\(P\)</span> is false. (The notation is called <a href="https://en.wikipedia.org/wiki/Iverson_bracket">Iverson
Bracket</a>.) </p>
<p>In Patrice, it can be convenient to write <span class="math">\(\mathbb E(Y[Y \le a])\)</span> in terms of the left and right tails of
<span class="math">\(Y\)</span>. With just a bit calculus, it is not difficult to see that if <span class="math">\(Y \ge 0\)</span> and <span class="math">\(p \ge 1\)</span>,
</p>
<div class="math">\begin{align}
\mathbb E(Y^p[Y \le a])
&amp;
= 
a^p \mathbb P(Y \le a)-\int_0^ap y^{p-1} \mathbb P(Y \le y) \, dy
\\\\
&amp;
=
\int_0^ap y^{p-1} P(Y&gt;a) \, dy-a^p \mathbb P(Y&gt;a)
\end{align}</div>
<p>Similarly
</p>
<div class="math">\begin{align}
\mathbb E(e^{-Y}[Y \le a])
&amp;
= 
\int_0^ae^{-y} \mathbb P(Y \le a) \mathbb \, d y+e^{-a} \mathbb P(Y \le a)
\\\\
&amp;
=
1-\int_0^a e^{-y} P(Y &gt; a) \, dy-e^{-a} P(Y &gt; a)
\end{align}</div>
<p>I recently put these two qualities in a Mathematica package <code>CalcMoment.m</code>. You can find it <a href="https://github.com/newptcai/Zeno">here</a>.
You can load it and try it a Mathematica notebook like this</p>
<div class="highlight"><pre><span></span><span class="n">SetDirectory</span><span class="p">[</span><span class="n">NotebookDirectory</span><span class="p">[]];</span><span class="w"></span>
<span class="n">Get</span><span class="p">[</span><span class="s">&quot;CalcMoment`&quot;</span><span class="p">]</span><span class="w"></span>

<span class="n">gdist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GammaDistribution</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">]</span><span class="w"></span>
<span class="n">gtest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TruncatedMoment</span><span class="p">[</span><span class="n">gdist</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TruncatedMoment</span><span class="p">[</span><span class="n">gdist</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">MomentForm</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Left&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TruncatedMoment</span><span class="p">[</span><span class="n">gdist</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">MomentForm</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Right&quot;</span><span class="p">]</span><span class="w"></span>
<span class="n">Assuming</span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">gtest</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Activate</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">FullSimplify</span><span class="p">]</span><span class="w"></span>

<span class="n">edist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExponentialDistribution</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"></span>
<span class="n">etest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TruncatedExpMoment</span><span class="p">[</span><span class="n">edist</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TruncatedExpMoment</span><span class="p">[</span><span class="n">edist</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">MomentForm</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Left&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TruncatedExpMoment</span><span class="p">[</span><span class="n">edist</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">MomentForm</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Right&quot;</span><span class="p">]</span><span class="w"></span>
<span class="n">Assuming</span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">etest</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Activate</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">FullSimplify</span><span class="p">]</span><span class="w"></span>
</pre></div>


<p>The output is of course <code>True</code>.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
    </main>
    <br>
    <footer>
      <div class="adjust-width">
        <div id="author-block" class="w3-light-grey w3-border">
            <img style="width: 35px; height: 56px; margin-left:50px;" src="theme/images/bookmark-red.png" alt="bookmark"></img>
            <div id="author-info">
                <a href="https://newptcai.github.io/authors.html#xing-shi-cai"><img style="width: 60px; height: 60px;" src="/authors/xing-shi-cai.png" onerror="this.src='/theme/images/avatar.png'"></img>
                </a>
                <div style="margin-left: 20px; margin-top: 15px;">
                    <a href="https://newptcai.github.io/authors.html#xing-shi-cai"><span id="author-name" class="w3-hover-text-dark-grey">Xing Shi Cai</span></a>
                    <p id="author-story" style="max-width: 500px;"></p>
                </div>
            </div>
        </div>
      </div>
      <br>
    </footer>
  </div>
</article>
<br>
<script src="https://newptcai.github.io/theme/js/shariff.min.js"></script>
</body>
</html>